{% load crispy_forms_tags %}
{% load static %}
{% block content %}
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
</head>
<div class="destination-entry">
  <h2>{{ destination.location }}</h2>
  <p>by {{ destination.author }} | {{ destination.date }}</p>
  <p>{{ destination.details }}</p>
</div>

<a href="{{ destination.pk}}/attractions/">Check out regional attractions (Broken Link)</a>

<hr>
<h4>Comments about {{ destination.location }}</h4>
{% for destinationcomment in destination.destinationcomment_set.all %}
<p>{{ destinationcomment.author }} &middot; {{ destinationcomment }}</p>
{% endfor %}
<hr>

<h4>Add a comment</h4>
<form action="" method="post">{% csrf_token %}
  {{ form|crispy }}
  <button class="btn btn-success ml-2" type="submit">Save</button>
</form>

<!-- the DIV that will contain the widget -->
<div class="weatherWidget"></div>

<script>
  window.weatherWidgetConfig = window.weatherWidgetConfig || [];
  window.weatherWidgetConfig.push({
    selector: ".weatherWidget",
    apiKey: "XTX4XS4WWUSBBL9NFD6HBR533", //Sign up for your personal key
    location: "{{ destination.location }}", //Enter an address
    unitGroup: "us", //"us" or "metric"
    forecastDays: 5, //how many days forecast to show
    title: "{{ destination.location }}", //optional title to show in the 
    showTitle: true,
    showConditions: true
  });

  (function () {
    var d = document, s = d.createElement('script');
    s.src = 'https://www.visualcrossing.com/widgets/forecast-simple/weather-forecast-widget-simple.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>


<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
</head>

<div>
  {% if destination.author.pk == request.user.pk %}
  <p><a href="{% url 'destination_edit'  destination.pk %}">Edit</a>
    <a href="{% url 'destination_delete' destination.pk %}">Delete</a>
  </p>
  {% endif %}
  <p>Back to <a href="{% url 'destination_list' %}">All Destinations</a>.</p>
</div>
<style>
  @import url('https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap');

  /*STARS CSS PLEASE DO NOT DELETE*/

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
  }

  html,
  body {
    display: grid;
    height: 100%;
    place-items: center;
    text-align: center;
    background: #fdfdfd;
  }

  .container {
    position: relative;
    width: 400px;
    background: #eba2ef;
    padding: 20px 30px;
    border: 1px solid #eba2ef;
    border-radius: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }

  .container .post {
    display: none;
  }

  .container .text {
    font-size: 25px;
    color: #666;
    font-weight: 500;
  }

  .container .edit {
    position: absolute;
    right: 10px;
    top: 5px;
    font-size: 16px;
    color: #666;
    font-weight: 500;
    cursor: pointer;
  }

  .container .edit:hover {
    text-decoration: underline;
  }

  .container .star-widget input {
    display: none;
  }

  .star-widget label {
    font-size: 40px;
    color: #444;
    padding: 10px;
    float: right;
    transition: all 0.2s ease;
  }

  input:not(:checked)~label:hover,
  input:not(:checked)~label:hover~label {
    color: #fd4;
  }

  input:checked~label {
    color: #fd4;
  }

  input#rate-5:checked~label {
    color: #fe7;
    text-shadow: 0 0 20px #952;
  }

  #rate-1:checked~form header:before {
    content: "I just hate it ";
  }

  #rate-2:checked~form header:before {
    content: "I don't like it ";
  }

  #rate-3:checked~form header:before {
    content: "It is awesome ";
  }

  #rate-4:checked~form header:before {
    content: "I just like it ";
  }

  #rate-5:checked~form header:before {
    content: "I just love it ";
  }

  .container form {
    display: none;
  }

  input:checked~form {
    display: block;
  }

  form header {
    width: 100%;
    font-size: 25px;
    color: #fe7;
    font-weight: 500;
    margin: 5px 0 20px 0;
    text-align: center;
    transition: all 0.2s ease;
  }

  form .textarea {
    height: 100px;
    width: 100%;
    overflow: hidden;
  }

  form .textarea textarea {
    height: 100%;
    width: 100%;
    outline: none;
    color: #eee;
    border: 1px solid #333;
    background: #222;
    padding: 10px;
    font-size: 17px;
    resize: none;
  }

  .textarea textarea:focus {
    border-color: #444;
  }

  form .btn {
    height: 45px;
    width: 100%;
    margin: 15px 0;
  }

  form .btn button {
    height: 100%;
    width: 100%;
    border: 1px solid #444;
    outline: none;
    background: #222;
    color: #999;
    font-size: 17px;
    font-weight: 500;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  form .btn button:hover {
    background: #1b1b1b;
  }
</style>

</html>
{% endblock content %}